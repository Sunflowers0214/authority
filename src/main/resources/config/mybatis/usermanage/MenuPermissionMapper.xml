<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.flysnow.usermanage.dao.MenuPermissionDao">

	<sql id="MenuPermissionWhere">
		<if test="menuPermissionId != null">
            AND a.menu_permission_id=#{menuPermissionId}
		</if>
		<if test="menuId != null">
            AND a.menu_id=#{menuId}
		</if>
		<if test="menuCode != null">
            AND a.menu_code=#{menuCode}
		</if>
		<if test="menuPermissionCode != null">
            AND a.menu_permission_code=#{menuPermissionCode}
		</if>
		<if test="menuPermissionName != null">
            AND a.menu_permission_name=#{menuPermissionName}
		</if>
	</sql>
	
	<sql id="MenuPermissionModifyWhere">
		<if test="where.menuPermissionId != null">
			menu_permission_id=#{where.menuPermissionId}
		</if>
		<if test="where.menuId != null">
			menu_id=#{where.menuId}
		</if>
		<if test="where.menuCode != null">
			menu_code=#{where.menuCode}
		</if>
		<if test="where.menuPermissionCode != null">
			menu_permission_code=#{where.menuPermissionCode}
		</if>
		<if test="where.menuPermissionName != null">
			menu_permission_name=#{where.menuPermissionName}
		</if>
	</sql>
	
	<insert id="insertMenuPermission" parameterType="MenuPermission">
		INSERT INTO t_menu_permission (
        <trim prefix="" suffixOverrides=",">
			<if test="menuPermissionId != null">
				,menu_permission_id
			</if>
			<if test="menuId != null">
				,menu_id
			</if>
			<if test="menuCode != null">
				,menu_code
			</if>
			<if test="menuPermissionCode != null">
				,menu_permission_code
			</if>
			<if test="menuPermissionName != null">
				,menu_permission_name
			</if>
		</trim>
		) VALUES (
        <trim prefix="" suffixOverrides=",">
	       	<if test="menuPermissionId != null">
				,#{menuPermissionId}
			</if>
	       	<if test="menuId != null">
				,#{menuId}
			</if>
	       	<if test="menuCode != null">
				,#{menuCode}
			</if>
	       	<if test="menuPermissionCode != null">
				,#{menuPermissionCode}
			</if>
	       	<if test="menuPermissionName != null">
				,#{menuPermissionName}
			</if>
		</trim>
		)
	</insert>

    <delete id="deleteMenuPermission" parameterType="MenuPermission">
        DELETE FROM t_menu_permission
        WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
            <include refid="MenuPermissionModifyWhere" />
        </trim>
    </delete>

    <update id="updateMenuPermission" parameterType="MenuPermission">
		UPDATE t_menu_permission
        <trim prefix="SET" suffixOverrides=",">
			<if test="menuPermissionId != null">
				,menu_permission_id=#{menuPermissionId}
			</if>
			<if test="menuId != null">
				,menu_id=#{menuId}
			</if>
			<if test="menuCode != null">
				,menu_code=#{menuCode}
			</if>
			<if test="menuPermissionCode != null">
				,menu_permission_code=#{menuPermissionCode}
			</if>
			<if test="menuPermissionName != null">
				,menu_permission_name=#{menuPermissionName}
			</if>
		</trim>
        WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
			<include refid="MenuPermissionModifyWhere" />
		</trim>
	</update>

    <!-- 菜单权限 (单条查询) -->
    <resultMap id="MenuPermissionResult" type="MenuPermission">
		<result column="menu_permission_id" property="menuPermissionId"/>
		<result column="menu_id" property="menuId"/>
		<result column="menu_code" property="menuCode"/>
		<result column="menu_permission_code" property="menuPermissionCode"/>
		<result column="menu_permission_name" property="menuPermissionName"/>
    </resultMap>
    <select id="getMenuPermission" resultMap="MenuPermissionResult" parameterType="MenuPermission" >
        SELECT
			a.menu_permission_id,
			a.menu_id,
			a.menu_code,
			a.menu_permission_code,
			a.menu_permission_name
        FROM t_menu_permission a
        WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
            <include refid="MenuPermissionWhere" />
        </trim>
    </select>

    <!-- 菜单权限 (列表查询) -->
    <resultMap id="MenuPermissionListResult" type="menuPermission">
		<result column="menu_permission_id" property="menuPermissionId"/>
		<result column="menu_id" property="menuId"/>
		<result column="menu_code" property="menuCode"/>
		<result column="menu_permission_code" property="menuPermissionCode"/>
		<result column="menu_permission_name" property="menuPermissionName"/>
    </resultMap>
	<select id="getMenuPermissionList" resultMap="MenuPermissionListResult" parameterType="MenuPermission" >
        SELECT
			a.menu_permission_id,
			a.menu_id,
			a.menu_code,
			a.menu_permission_code,
			a.menu_permission_name
		FROM t_menu_permission a
		WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
            <include refid="MenuPermissionWhere" />
        </trim>
	</select>

    <!-- 菜单权限 (分页查询) -->
    <resultMap id="MenuPermissionListPageResult" type="java.util.HashMap">
		<result column="menu_permission_id" property="menuPermissionId"/>
		<result column="menu_id" property="menuId"/>
		<result column="menu_code" property="menuCode"/>
		<result column="menu_permission_code" property="menuPermissionCode"/>
		<result column="menu_permission_name" property="menuPermissionName"/>
    </resultMap>
    <select id="getMenuPermissionListPage" resultMap="MenuPermissionListPageResult" parameterType="map" >
        SELECT
			a.menu_permission_id,
			a.menu_id,
			a.menu_code,
			a.menu_permission_code,
			a.menu_permission_name
        FROM t_menu_permission a
        WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
            <include refid="MenuPermissionWhere" />
        </trim>
        <if test="pageSort != null">
            ORDER BY #{pageSort}
        </if>
        LIMIT #{beginRow},#{pageSize}
    </select>
    <select id="getMenuPermissionListPageCount" resultType="int" parameterType="map" >
        SELECT count(1)
        FROM t_menu_permission a
        WHERE 1=1
        <trim prefix="" prefixOverrides="AND">
            <include refid="MenuPermissionWhere" />
        </trim>
    </select>

</mapper>